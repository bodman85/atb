!function o(a,l,i){function r(t,e){if(!l[t]){if(!a[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(d)return d(t,!0);throw(n=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",n}n=l[t]={exports:{}},a[t][0].call(n.exports,function(e){return r(a[t][1][e]||e)},n,n.exports,o,a,l,i)}return l[t].exports}for(var d="function"==typeof require&&require,e=0;e<i.length;e++)r(i[e]);return r}({1:[function(e,t,n){const i="https://dapi.binance.com/dapi/v1/";let o=[];t.exports={getAllSymbols:async function(){var e;return 0===o.length&&(e=await async function(e){let t=i+e,n=new Headers;n.append("Content-Type","application/json");const o={method:"GET",headers:n},a=await fetch(t,o),l=await a.json();return l}("exchangeInfo"),o=e.symbols),o},requestPrice:function(e,t){!async function(e,t){let n=i+e,o=new XMLHttpRequest;o.onreadystatechange=function(){4==this.readyState&&200==this.status&&t(JSON.parse(o.responseText))},o.open("GET",n,!0),o.send()}(`ticker/price?symbol=${e}`,t)}}},{}],2:[function(e,t,n){var d=e("./data-manager"),i=e("./ui-manager");let s=0;window.onload=async function(){o(s),document.getElementById("addNewPairButton").addEventListener("click",o),document.getElementById("removeAllButton").addEventListener("click",a),setInterval(l,500)};async function o(){s++;let e=document.createElement("div");e.classList.add("row"),e.classList.add("mb-1");var t=`leadingInstrument${s}`,n=`ledInstrument${s}`,o=`leadingPrice${s}`,a=`ledPrice${s}`,l=`deltaPcnt${s}`,i=`deltaUsd${s}`,r=`removeButton${s}`;e.appendChild(c(t,"select")),e.appendChild(c(o,"input","text")),e.appendChild(c(n,"select")),e.appendChild(c(a,"input","text")),e.appendChild(c(l,"input","text")),e.appendChild(c(i,"input","text")),e.appendChild(c(r,"button","button","remove")),document.getElementById("dataGrid").appendChild(e),u(t,await d.getAllSymbols()),u(n,await d.getAllSymbols()),document.getElementById("removeAllButton").classList.remove("invisible")}function a(){s=0,document.getElementById("removeAllButton").classList.toggle("invisible"),document.getElementById("dataGrid").innerHTML=""}function c(e,t,n,o){let a=document.createElement("div");a.classList.add("col");var l=document.createElement(t);if(l.id=e,n){if("text"===n)l.type=n,l.classList.add("form-control");else if("button"===n&&(l.type=n,l.classList.add("btn"),l.classList.add("btn-secondary"),"remove"===o)){let e=document.createElement("span");e.classList.add("fa"),e.classList.add("fa-trash"),l.appendChild(e),l.addEventListener("click",function(){s-=i.removeRowWithElement(l.id)},!1)}}else l.classList.add("form-select");return a.appendChild(l),a}function u(e,t){let n=document.getElementById(e);i.removeAllChildNodes(n);for(var o of t)n.appendChild(i.createOption(o.symbol,o.symbol));i.sortOptions(n)}function l(){for(let a=s;0<a;a--){var e=document.getElementById(`leadingInstrument${a}`);e&&d.requestPrice(e.value,e=>{let t=document.getElementById(`leadingPrice${a}`);var n=document.getElementById(`ledPrice${a}`);let o=document.getElementById(`deltaUsd${a}`);e[0]&&t&&(t.value=e[0].price,o.value=parseFloat(n.value)-parseFloat(t.value))});e=document.getElementById(`ledInstrument${a}`);e&&d.requestPrice(e.value,e=>{var t=document.getElementById(`leadingPrice${a}`);let n=document.getElementById(`ledPrice${a}`),o=document.getElementById(`deltaPcnt${a}`);e[0]&&t&&n&&(n.value=e[0].price,o.value=100*(n.value/t.value-1))})}}},{"./data-manager":1,"./ui-manager":3}],3:[function(e,t,n){t.exports={removeRowWithElement:function(e){let t=document.getElementById(e).parentNode.parentNode;return e=t?1:0,t.remove(),e},removeAllChildNodes:function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},createOption:function(e,t){var n=document.createElement("option");return n.setAttribute("value",t),n.innerHTML=e,n},sortOptions:function(e){for(var t=new Array,n=0;n<e.options.length;n++)t[n]=new Array,t[n][0]=e.options[n].text,t[n][1]=e.options[n].value;for(t.sort(),n=e.options.length=0;n<t.length;n++){var o=new Option(t[n][0],t[n][1]);e.options[n]=o}}}},{}]},{},[2]);
