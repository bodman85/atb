!function d(o,a,i){function l(t,e){if(!a[t]){if(!o[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(r)return r(t,!0);throw(n=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",n}n=a[t]={exports:{}},o[t][0].call(n.exports,function(e){return l(o[t][1][e]||e)},n,n.exports,d,o,a,i)}return a[t].exports}for(var r="function"==typeof require&&require,e=0;e<i.length;e++)l(i[e]);return l}({1:[function(e,t,n){const d="leadingInstrument",o="ledInstrument",a="leadingInstruments",i="ledInstruments";function l(e){e=window.localStorage.getItem(e);return e?JSON.parse(e):[]}function r(e,t){c(a,e),c(i,t)}function c(e,t){window.localStorage.setItem(e,JSON.stringify(t))}t.exports={getInstruments:l,cache:c,selectCachedValues:function(e){document.getElementById(d+e).value=l(a)[e-1],document.getElementById(o+e).value=l(i)[e-1]},cacheDataRow:function(e){let t=l(a),n=l(i);t.push(document.getElementById(d+e).value),n.push(document.getElementById(o+e).value),r(t,n)},replaceCachedRow:function(e){let t=l(a),n=l(i);t[e-1]=document.getElementById(d+e).value,n[e-1]=document.getElementById(o+e).value,r(t,n)},removeCachedRow:function(e){let t=l(a),n=l(i);t.splice(e-1,1),n.splice(e-1,1),r(t,n)},removeAllCachedRows:function(){r([],[])},getCachedRowsCount:function(){return l(a).length}}},{}],2:[function(e,t,n){const i="https://dapi.binance.com/dapi/v1/";let d=[];async function o(e,t){e=i+e;let n=new XMLHttpRequest;n.onreadystatechange=function(){4==this.readyState&&200==this.status&&t(JSON.parse(n.responseText))},n.open("GET",e,!0),n.send()}t.exports={getAllSymbols:async function(){var e;return 0===d.length&&(e=await async function(e){let t=i+e,n=new Headers;n.append("Content-Type","application/json");const d={method:"GET",headers:n},o=await fetch(t,d),a=await o.json();return a}("exchangeInfo"),d=e.symbols),d},requestPrice:function(e,t){o(`ticker/price?symbol=${e}`,t)},requestBestPrices:function(e,t){o(`ticker/bookTicker?symbol=${e}`,t)}}},{}],3:[function(e,t,n){var d=e("./data-manager"),o=e("./ui-utils"),a=e("./cache-manager");let i;window.onload=async function(){i=0,async function(){for(let e=0;e<a.getCachedRowsCount();e++)await l(a.selectCachedValues)}(),document.getElementById("addNewPairButton").addEventListener("click",function(){l(a.cacheDataRow)}),document.getElementById("removeAllButton").addEventListener("click",f),setInterval(g,1e3)};async function l(e){i++,function(){let e=document.createElement("div");e.classList.add("row"),e.classList.add("mb-1"),e.appendChild(r(`leadingInstrument${i}`,"select")),e.appendChild(r(`leadingPrice${i}`,"input","text")),e.appendChild(r(`ledInstrument${i}`,"select")),e.appendChild(r(`ledPrice${i}`,"input","text")),e.appendChild(r(`deltaPcnt${i}`,"input","text")),e.appendChild(r(`deltaUsd${i}`,"input","text")),e.appendChild(r(`arrowButton${i}`,"button","button","arrow")),e.appendChild(r(`removeButton${i}`,"button","button","remove")),document.getElementById("dataGrid").appendChild(e)}(),e=e,o.fillDropdownWithData(`leadingInstrument${i}`,await d.getAllSymbols()),o.fillDropdownWithData(`ledInstrument${i}`,await d.getAllSymbols()),await(e&&"function"==typeof e&&e(i)),document.getElementById("removeAllButton").classList.remove("invisible")}function r(e,t,n,d){let o=document.createElement("div");o.classList.add("col");var a=document.createElement(t);if(a.id=e,n){if("text"===n)a.type=n,a.classList.add("form-control");else if("button"===n)switch(a.type=n,a.classList.add("btn"),a.classList.add("btn-secondary"),d){case"arrow":o.classList.add("col-1"),a.appendChild(c("fa-arrow-right")),a.addEventListener("click",s);break;case"remove":o.classList.add("col-1"),a.appendChild(c("fa-trash")),a.addEventListener("click",m)}}else a.classList.add("form-select"),a.addEventListener("change",u);return o.appendChild(a),o}function c(e){let t=document.createElement("span");return t.classList.add("fa"),t.classList.add(e),t}function u(){a.replaceCachedRow(p(this.id)),window.stop()}function s(){var e=p(this.id),t=document.getElementById(`leadingInstrument${e}`).value,e=document.getElementById(`ledInstrument${e}`).value;window.location.href=`best_prices.html?leadingInstrument=${t}&ledInstrument=${e}`}function m(){o.removeRowWithElement(this.id);var e=p(this.id);a.removeCachedRow(e),function(t,n){for(let e=t;e<=n;e++)document.getElementById(`leadingInstrument${e}`).id=`leadingInstrument${e-1}`,document.getElementById(`ledInstrument${e}`).id=`ledInstrument${e-1}`,document.getElementById(`leadingPrice${e}`).id=`leadingPrice${e-1}`,document.getElementById(`ledPrice${e}`).id=`ledPrice${e-1}`,document.getElementById(`deltaPcnt${e}`).id=`deltaPcnt${e-1}`,document.getElementById(`deltaUsd${e}`).id=`deltaUsd${e-1}`,document.getElementById(`removeButton${e}`).id=`removeButton${e-1}`,document.getElementById(`arrowButton${e}`).id=`arrowButton${e-1}`}(e+1,i),--i}function p(e){return parseInt(e.match(/\d+$/)[0],10)}function f(){i=0,a.removeAllCachedRows(),o.clearDataGrid(this.id,"dataGrid")}function g(){for(let o=i;0<o;o--){var e=document.getElementById(`leadingInstrument${o}`);e&&d.requestPrice(e.value,e=>{let t=document.getElementById(`leadingPrice${o}`);var n=document.getElementById(`ledPrice${o}`);let d=document.getElementById(`deltaUsd${o}`);e[0]&&t&&(t.value=e[0].price,d.value=parseFloat(n.value-t.value).toFixed(4))});e=document.getElementById(`ledInstrument${o}`);e&&d.requestPrice(e.value,e=>{var t=document.getElementById(`leadingPrice${o}`);let n=document.getElementById(`ledPrice${o}`),d=document.getElementById(`deltaPcnt${o}`);e[0]&&t&&n&&(n.value=e[0].price,d.value=parseFloat((100*(n.value/t.value-1)).toFixed(4)))})}}},{"./cache-manager":1,"./data-manager":2,"./ui-utils":4}],4:[function(e,t,n){t.exports={removeRowWithElement:function(e){let t=document.getElementById(e).parentNode.parentNode;t.remove()},fillDropdownWithData:function(e,t){let n=document.getElementById(e);!function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}(n);for(var d of t)n.appendChild((o=d.symbol,a=d.symbol,d=void 0,(d=document.createElement("option")).setAttribute("value",a),d.innerHTML=o,d));var o,a;!function(e){for(var t=new Array,n=0;n<e.options.length;n++)t[n]=new Array,t[n][0]=e.options[n].text,t[n][1]=e.options[n].value;t.sort(),e.options.length=0;for(n=0;n<t.length;n++){var d=new Option(t[n][0],t[n][1]);e.options[n]=d}}(n)},clearDataGrid:function(e,t){document.getElementById(e).classList.toggle("invisible"),document.getElementById(t).innerHTML=""}}},{}]},{},[3]);
